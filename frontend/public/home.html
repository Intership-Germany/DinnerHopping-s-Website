<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dinnerhopping - Home</title>
	<script src="js/auth-guard.js"></script>
	<script src="https://cdn.tailwindcss.com"></script>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
	<script src="js/config.js"></script>
	<script src="js/auth.js"></script>
	<script src="js/unauthorized.js"></script>
	<script src="js/client.js"></script>
	<script src="js/debug-banner.js"></script>
	<script src="js/includes.js" defer></script>
	<script src="home-page.js" defer></script>
	<style>
		body {
			font-family: 'Inter', sans-serif;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
			background-color: #f0f4f7;
		}
	</style>
</head>

<body class="text-[#172a3a] min-h-screen flex flex-col">
	<!-- Header -->
	<div data-include="partials/header.html"></div>

	<!-- Main Content -->
	<main class="flex-grow max-w-3xl mx-auto w-full px-4 py-10">
		<h1 class="text-3xl font-bold mb-8 text-center">Upcoming & Active Events</h1>
		<!-- Filters -->
		<section class="mb-4 bg-white/70 backdrop-blur rounded-xl shadow p-4">
			<form id="events-filters" class="grid grid-cols-1 md:grid-cols-7 gap-3 items-end">
				<label class="flex flex-col md:col-span-2">
					<span class="text-xs font-medium text-gray-600">Title</span>
					<input id="filter-title" type="text" placeholder="Search title..." class="mt-1 rounded-lg border-gray-300 focus:ring-[#008080] focus:border-[#008080]" />
				</label>
				<label class="flex flex-col">
					<span class="text-xs font-medium text-gray-600">Max fee</span>
					<select id="filter-fee" class="mt-1 rounded-lg border-gray-300 focus:ring-[#008080] focus:border-[#008080]">
						<option value="">Any</option>
						<option value="0">Free only</option>
						<option value="500">≤ 5 €</option>
						<option value="1000">≤ 10 €</option>
						<option value="2000">≤ 20 €</option>
					</select>
				</label>
				<label class="flex flex-col">
					<span class="text-xs font-medium text-gray-600">Deadline before</span>
					<input id="filter-deadline" type="date" class="mt-1 rounded-lg border-gray-300 focus:ring-[#008080] focus:border-[#008080]" />
				</label>
				<label class="flex items-center gap-2 md:justify-end">
					<input id="filter-available" type="checkbox" class="rounded text-[#008080] focus:ring-[#008080]" />
					<span class="text-sm text-gray-700">Only available</span>
				</label>
				<label class="flex flex-col">
					<span class="text-xs font-medium text-gray-600">Sort by</span>
					<select id="filter-sort" class="mt-1 rounded-lg border-gray-300 focus:ring-[#008080] focus:border-[#008080]">
						<option value="">Default</option>
						<option value="deadline_asc">Deadline · soonest</option>
						<option value="fee_asc">Fee · low to high</option>
						<option value="fee_desc">Fee · high to low</option>
					</select>
				</label>
				<div class="flex md:justify-end">
					<button type="reset" id="filter-reset" class="inline-flex items-center px-3 py-2 rounded-lg border border-gray-300 text-sm text-gray-700 hover:bg-gray-50">Reset</button>
				</div>
			</form>
			<!-- Active filters + counter -->
			<div class="mt-3 flex flex-wrap items-center gap-2">
				<div id="active-filters" class="flex flex-wrap gap-2"></div>
				<span id="results-count" class="text-sm text-gray-600"></span>
			</div>
		</section>

		<!-- Dynamic events list -->
		<div id="events-list" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

		<!-- Pagination -->
		<nav id="events-pager" class="mt-4 flex items-center justify-center gap-2" aria-label="Pagination">
			<button id="page-prev" class="px-3 py-2 rounded-lg border border-gray-300 text-sm text-gray-700 hover:bg-gray-50">Prev</button>
			<span id="page-info" class="text-sm text-gray-700"></span>
			<button id="page-next" class="px-3 py-2 rounded-lg border border-gray-300 text-sm text-gray-700 hover:bg-gray-50">Next</button>
		</nav>

		<!-- Templates: keep JS minimal and visuals consistent -->
		<template id="tpl-loading">
			<div class="bg-white rounded-2xl shadow-xl p-6 animate-pulse">
				<div class="h-6 bg-gray-200 rounded w-2/3 mb-4"></div>
				<div class="h-4 bg-gray-100 rounded w-1/3 mb-2"></div>
				<div class="h-4 bg-gray-100 rounded w-full"></div>
			</div>
		</template>

		<template id="tpl-error">
			<div class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded">Could not load events. Please try again later.</div>
		</template>

		<template id="tpl-empty">
			<div class="bg-white rounded-2xl shadow p-6 text-center text-gray-600">No published events at the moment. Please check back soon!</div>
		</template>

		<template id="tpl-event-card">
			<div class="bg-white rounded-2xl shadow-xl p-6 flex flex-col md:flex-row items-start md:items-center justify-between border-l-4 border-[#008080]">
				<div class="event-left text-left w-full md:w-auto">
					<h2 class="event-title text-xl font-bold mb-2 text-[#008080]"></h2>
					<p class="event-desc text-sm text-gray-700 mb-2"></p>
					<div class="event-meta flex flex-wrap gap-2">
						<span class="event-date inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-[#008080]/10 text-[#005f5f] ring-1 ring-[#008080]/20">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3.5 h-3.5"><path d="M6 2a1 1 0 011 1v1h6V3a1 1 0 112 0v1h1a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V6a2 2 0 012-2h1V3a1 1 0 011-1zM4 8v7a1 1 0 001 1h10a1 1 0 001-1V8H4z"/></svg>
							<span class="event-date-text"></span>
						</span>
						<span class="event-fee-badge inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-700 ring-1 ring-gray-200">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3.5 h-3.5"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zm.75-11.5a.75.75 0 10-1.5 0v.32a3.751 3.751 0 00-2.69 1.67.75.75 0 101.28.8 2.251 2.251 0 011.41-.98v2.37a3.251 3.251 0 00-2.75 3.21 3.25 3.25 0 006.5 0 .75.75 0 10-1.5 0 1.75 1.75 0 11-3.5 0c0-.8.55-1.48 1.25-1.69v2.19a.75.75 0 101.5 0v-2.2a3.251 3.251 0 002.75-3.19 3.25 3.25 0 00-3-3.2V6.5z"/></svg>
							<span class="event-fee-text"></span>
						</span>
					</div>
				</div>
				<div class="event-right flex flex-col items-center md:items-end gap-2 mt-4 md:mt-0 w-full md:w-auto">
					<span class="event-spots text-sm font-semibold"></span>
					<a class="event-cta px-6 py-3 bg-[#008080] text-white font-bold rounded-xl shadow-lg transition-transform duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[#008080]/40" href="#">Apply Now</a>
				</div>
			</div>
		</template>
	</main>

	<!-- Footer -->
	<div data-include="partials/footer.html"></div>

</body>

</html>