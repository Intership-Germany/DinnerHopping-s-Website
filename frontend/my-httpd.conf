# Custom Apache configuration for DinnerHopping frontend
ServerName localhost

<Directory "/usr/local/apache2/htdocs">
    AllowOverride All
    Require all granted
</Directory>

# Ensure FRONTEND_BASE from the container environment is available to Apache
<IfModule env_module>
    PassEnv FRONTEND_BASE
</IfModule>

# Redirect /index.html to the URL defined in FRONTEND_BASE (e.g., http://localhost)
# Falls back to / if FRONTEND_BASE is not set.
<IfModule mod_rewrite.c>
    RewriteEngine On

    # If FRONTEND_BASE is set, redirect /index.html there
    RewriteCond %{REQUEST_URI} ^/index\.html$
    RewriteCond %{ENV:FRONTEND_BASE} !^$
    RewriteRule ^.*$ %{ENV:FRONTEND_BASE}/ [R=302,L]

    # Fallback: redirect /index.html to site root
    RewriteCond %{REQUEST_URI} ^/index\.html$
    RewriteRule ^.*$ / [R=302,L]
</IfModule>
